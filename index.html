<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Textquests</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial Narrow', 'Arial Black', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: white;
        }

        .container {
            text-align: center;
            max-width: 600px;
            width: 100%;
        }

        .wheel-container {
            position: relative;
            display: inline-block;
            margin-bottom: 40px;
        }

        .wheel {
            width: 400px;
            height: 400px;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 8px solid #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
            transition: transform 4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .wheel-segment {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: 100% 100%;
            border: 1px solid rgba(255,255,255,0.3);
            clip-path: polygon(0% 100%, 100% 100%, 100% 0%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wheel-segment .segment-text {
            position: absolute;
            width: 140px;
            text-align: center;
            font-weight: 600;
            font-size: 11px;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            line-height: 1.1;
            transform-origin: center;
            font-family: 'Arial Narrow', 'Helvetica Neue', Arial, sans-serif;
            letter-spacing: -0.3px;
        }

        .wheel-pointer {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 25px solid #fff;
            z-index: 10;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            z-index: 5;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }

        .spin-button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a6f);
            border: none;
            border-radius: 50px;
            padding: 12px 16px;
            font-size: 1rem;
            font-family: 'Courier New', 'Monaco', 'Lucida Console', 'Liberation Mono', monospace;
            font-weight: bold;
            color: #e8eaf6;
            text-shadow: 
                2px 2px 0px #0000008a,
                -1px -1px 0px #0000008a,
                1px -1px 0px #0000008a,
                -1px 1px 0px #0000008a,
                3px 3px 5px rgba(0,0,0,0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            text-transform: uppercase;
            letter-spacing: 1px;
            display: inline-block;
            width: auto;
            min-width: fit-content;
            box-sizing: border-box;
        }

        .spin-button:hover {
            background: linear-gradient(45deg, #ee5a6f, #ff6b6b);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .spin-button:active {
            transform: translateY(0);
        }

        .spin-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .result {
            margin-top: 30px;
            padding: 20px;
            border-radius: 15px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .result-text {
            font-size: 1.3rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* Mobile optimizations */
        @media (max-width: 480px) {
            .wheel {
                width: 320px;
                height: 320px;
            }

            .wheel-segment .segment-text {
                width: 110px;
                font-size: 9px;
            }

            .spin-button {
                padding: 10px 16px;
                font-size: 0.9rem;
            }

            .result-text {
                font-size: 1.1rem;
            }

            .container {
                padding: 10px;
            }
        }

        @media (max-width: 320px) {
            .wheel {
                width: 280px;
                height: 280px;
            }

            .wheel-segment .segment-text {
                width: 90px;
                font-size: 8px;
            }
        }

        .spinning {
            pointer-events: none;
        }

        .page-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .page-title {
            font-size: 2.1rem;
            font-family: 'Courier New', 'Monaco', 'Lucida Console', 'Liberation Mono', monospace;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 
                2px 2px 0px #000,
                -1px -1px 0px #000,
                1px -1px 0px #000,
                -1px 1px 0px #000,
                3px 3px 5px rgba(0,0,0,0.5);
            color: #e8eaf6;
            letter-spacing: 2px;
            text-transform: uppercase;
            padding: 8px 16px;
            background: linear-gradient(45deg, rgba(255,235,59,0.1), rgba(255,193,7,0.1));
            display: inline-block;
        }

        .page-subtitle {
            font-size: 0.8rem;
            font-family: 'Courier New', 'Monaco', 'Lucida Console', 'Liberation Mono', monospace;
            font-weight: 300;
            opacity: 0.85;
            color: #e8eaf6;
            letter-spacing: 0.5px;
            font-style: normal;
        }

        @media (max-width: 480px) {
            .page-title {
                font-size: 1.8rem;
                padding: 6px 12px;
                letter-spacing: 1.5px;
            }
            
            .page-subtitle {
                font-size: 0.7rem;
                letter-spacing: 0.4px;
            }
            
            .page-header {
                margin-bottom: 30px;
            }
        }

        @media (max-width: 320px) {
            .page-title {
                font-size: 1.5rem;
                padding: 4px 8px;
                letter-spacing: 1px;
            }
            
            .page-subtitle {
                font-size: 0.6rem;
                letter-spacing: 0.3px;
            }
        }

        /* Modal styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 50px 30px 30px 30px;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            text-align: center;
            animation: modalSlideIn 0.3s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.7) translateY(-50px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
            transition: all 0.2s ease;
            font-weight: bold;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #e8eaf6;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            font-size: 1.2rem;
            line-height: 1.4;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            padding: 0 10px;
        }

        .modal-extra-info, .modal-bonus {
            font-family: 'Courier New', 'Monaco', 'Lucida Console', 'Liberation Mono', monospace;
            font-size: 1rem;
            line-height: 1.3;
            opacity: 0.85;
            margin-top: 15px;
            padding: 0 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .copy-button {
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            border: none;
            border-radius: 25px;
            padding: 10px 20px;
            font-size: 0.9rem;
            font-family: 'Courier New', 'Monaco', 'Lucida Console', 'Liberation Mono', monospace;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 20px;
            display: inline-block;
            min-width: 120px;
        }

        .copy-button:hover {
            background: linear-gradient(45deg, #45b7d1, #4ecdc4);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .copy-button:active {
            transform: translateY(0);
        }

        .copy-button.copied {
            background: linear-gradient(45deg, #96ceb4, #00b894);
        }

        /* Mobile modal adjustments */
        @media (max-width: 480px) {
            .modal {
                padding: 45px 20px 25px 20px;
                margin: 10px;
                border-radius: 15px;
                max-height: 70vh;
            }

            .copy-button {
                font-size: 0.8rem;
                padding: 8px 16px;
                margin-top: 15px;
                min-width: 100px;
            }

            .modal-title {
                font-size: 1.3rem;
                margin-bottom: 15px;
            }

            .modal-content {
                font-size: 1.1rem;
                padding: 0 5px;
            }

            .modal-extra-info, .modal-bonus {
                font-size: 0.9rem;
                margin-top: 12px;
                padding: 0 5px;
            }

            .modal-close {
                top: 10px;
                right: 10px;
                width: 30px;
                height: 30px;
                font-size: 16px;
            }
        }

        @media (max-width: 320px) {
            .modal {
                padding: 40px 15px 20px 15px;
                margin: 5px;
            }

            .modal-title {
                font-size: 1.2rem;
            }

            .modal-content {
                font-size: 1rem;
                padding: 0 5px;
            }

            .modal-extra-info, .modal-bonus {
                font-size: 0.8rem;
                margin-top: 10px;
                padding: 0 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="page-header">
            <h1 class="page-title">TextQuests</h1>
            <p class="page-subtitle">A game of easy and fun things to do over text!</p>
        </div>
        <div class="wheel-container">
            <div class="wheel-pointer"></div>
            <div class="wheel" id="wheel">
                <!-- Segments will be dynamically generated -->
            </div>
            <div class="center-circle"></div>
        </div>

        <button class="spin-button" id="spinButton">Spin the Wheel!</button>
    </div>

    <!-- Modal for quest results -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <button class="modal-close" id="modalClose">&times;</button>
            <div class="modal-content" id="modalContent"></div>
        </div>
    </div>

    <script>
        const wheel = document.getElementById('wheel');
        const spinButton = document.getElementById('spinButton');
        const modalOverlay = document.getElementById('modalOverlay');
        const modalContent = document.getElementById('modalContent');
        const modalClose = document.getElementById('modalClose');
        
        // Quest dataclass structure
        class Quest {
            constructor(emoji, description, extraInfo = null, bonus = null) {
                this.emoji = emoji;
                this.description = description;
                this.extraInfo = extraInfo;
                this.bonus = bonus;
            }
        }

        const segments = [
            new Quest('üó£Ô∏è', 'What is some recent positive trend in your life that you are grateful for and why?'),
            new Quest('üì∏', 'Share 3-10 pics of some favorite moments from past 2 years', null, "Share the backstories behind the photos."),
            new Quest('üó£Ô∏è', 'What, do you feel, is a common misperception about you?'),
            new Quest('üé•', 'Make a 30-sec music video using only facial muscles for dancing', 'Play a fun song in the background and let whatever silly faces/face movements happen happen. ü§™'),
            new Quest('üó£Ô∏è', 'Recount a not-too-distant time when laughed unreasonably hard', null, 'How would you describe your sense of humor?'),
            new Quest('üé∑', 'Make/share a 5+ song playlist titled "[your name]-core"', 'E.g., if your name is Marge, you would make a playlist titled "Marge-core", with 5+ songs that capture your vibe/aesthetic.'),
            new Quest('üó£Ô∏è', 'Share a pic+explanation of your favorite part of/thing in your house', null, 'Generally, what is important to you in a living space?'),
            new Quest('üó£Ô∏è', 'Share one or more quirks/unique about how you were raised/where you grew up', null, "Bonus: Describe both a positive and negative aspect and/or describe how your relationship w/ the world is different as a result."),
            new Quest('üé•', 'Share a video (youtube, camera roll, etc.) that brings you joy', 'Explain as needed.'),
            new Quest('üì∏', 'W/ ur game partner, see who can take the silliest photo in the next 48hrs'),
            new Quest('üó£Ô∏è', 'Perform a haiku about something that frustrated you today', null, 'Do it in a silly voice!'),
            new Quest('üó£Ô∏è', 'Besides you, who is the goofiest member of your family/family group? In what way(s) are they goofy?', null, 'How does this compare/contrast to your flavor of goofiness?'),
            new Quest('üé∑', 'Make/share a 3+ song playlist titled "[your game partner\'s name]-core"', 'E.g., if your partner\'s name is Sam, you would make a playlist titled "Sam-core", with 3+ songs that you think capture their vibe/aesthetic.'),
            new Quest('üì∏', 'Share a photo of the inside your fridge‚Äîwhat is your favorite item & why?', null, 'What is your least favorite item?'),
            new Quest('üì∏', 'Share a pic of yourself in some form of costume or goofy apparel.', 'E.g., an old Halloween costume, funny sunglasses at the store, etc.', 'Take this photo in the next 48 hours.'),
            new Quest('üé•', 'Share one or two memes/shorts that you find especially funny.'),
        ];
        
        // Colors for the segments (will cycle if more segments than colors)
        const colors = [
            '#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4',
            '#feca57', '#ff9ff3', '#54a0ff', '#5f27cd',
            '#ff7675', '#74b9ff', '#a29bfe', '#fd79a8',
            '#fdcb6e', '#e17055', '#00b894', '#00cec9'
        ];
        
        let isSpinning = false;
        let currentRotation = 0;

        // Initialize the wheel
        function createWheel() {
            const numSegments = segments.length;
            const anglePerSegment = 360 / numSegments;
            
            wheel.innerHTML = ''; // Clear existing segments
            
            for (let i = 0; i < numSegments; i++) {
                const segment = document.createElement('div');
                segment.className = 'wheel-segment';
                
                const angle = i * anglePerSegment;
                const colorIndex = i % colors.length;
                
                // Create proper pie slice using clip-path
                const startAngle = (i * anglePerSegment) - 90; // Start from top
                const endAngle = ((i + 1) * anglePerSegment) - 90;
                
                // Convert angles to radians for calculations
                const startRad = (startAngle * Math.PI) / 180;
                const endRad = (endAngle * Math.PI) / 180;
                
                // Calculate multiple points along the arc for a proper pie slice
                const centerX = 50;
                const centerY = 50;
                const radius = 50;
                
                // Create points for the pie slice - start from center, go to start edge, along arc, back to center
                let clipPathPoints = `50% 50%`; // Start at center
                
                // Add start point
                const x1 = centerX + radius * Math.cos(startRad);
                const y1 = centerY + radius * Math.sin(startRad);
                clipPathPoints += `, ${x1}% ${y1}%`;
                
                // Add points along the arc (more points for smoother curves on wider segments)
                const arcPoints = Math.max(2, Math.ceil(anglePerSegment / 5)); // More points for larger segments
                for (let j = 1; j < arcPoints; j++) {
                    const intermediateAngle = startAngle + (anglePerSegment * j / arcPoints);
                    const intermediateRad = (intermediateAngle * Math.PI) / 180;
                    const xIntermediate = centerX + radius * Math.cos(intermediateRad);
                    const yIntermediate = centerY + radius * Math.sin(intermediateRad);
                    clipPathPoints += `, ${xIntermediate}% ${yIntermediate}%`;
                }
                
                // Add end point
                const x2 = centerX + radius * Math.cos(endRad);
                const y2 = centerY + radius * Math.sin(endRad);
                clipPathPoints += `, ${x2}% ${y2}%`;
                
                // Create proper pie slice
                segment.style.background = colors[colorIndex];
                segment.style.clipPath = `polygon(${clipPathPoints})`;
                segment.style.transform = 'none';
                segment.style.width = '100%';
                segment.style.height = '100%';
                segment.style.position = 'absolute';
                segment.style.border = '1px solid rgba(255,255,255,0.3)';
                
                // Create text element
                const textElement = document.createElement('div');
                textElement.className = 'segment-text';
                textElement.textContent = segments[i].description;
                
                // Position text in the middle of the segment
                const midAngle = startAngle + (anglePerSegment / 2);
                const textDistance = 32; // Distance from center (adjusted for larger wheel)
                const textX = 50 + textDistance * Math.cos((midAngle * Math.PI) / 180);
                const textY = 50 + textDistance * Math.sin((midAngle * Math.PI) / 180);
                
                textElement.style.left = `${textX}%`;
                textElement.style.top = `${textY}%`;
                // Rotate text to read left-to-right from center toward edge (no +90 offset)
                textElement.style.transform = `translate(-50%, -50%) rotate(${midAngle}deg)`;
                
                // Dynamic font sizing based on text length and number of segments
                const textLength = segments[i].description.length;
                const baseFontSize = Math.max(8, 27 - numSegments); // Base size decreases with more segments
                const lengthPenalty = Math.max(0, textLength - 30) * 0.1; // Reduce size for long text
                const dynamicFontSize = Math.max(6, baseFontSize - lengthPenalty);
                
                textElement.style.fontSize = dynamicFontSize + 'px';
                textElement.style.width = '100px'; // Fixed width for text wrapping
                textElement.style.whiteSpace = 'normal'; // Allow text wrapping
                textElement.style.overflow = 'hidden';
                textElement.style.wordBreak = 'break-word';
                
                segment.appendChild(textElement);
                wheel.appendChild(segment);
            }
        }

        // Initialize wheel on page load
        createWheel();
        
        // Match button width to title width for symmetry
        function matchButtonWidth() {
            const title = document.querySelector('.page-title');
            const button = document.querySelector('.spin-button');
            if (title && button) {
                const titleWidth = title.offsetWidth;
                button.style.width = titleWidth + 'px';
            }
        }
        
        // Set width on load and resize
        window.addEventListener('load', matchButtonWidth);
        window.addEventListener('resize', matchButtonWidth);

        spinButton.addEventListener('click', spinWheel);

        function spinWheel() {
            if (isSpinning) return;
            
            isSpinning = true;
            spinButton.disabled = true;
            spinButton.textContent = 'Spinning...';
            
            // Generate random spin (3-6 full rotations + random angle)
            const minSpins = 2;
            const maxSpins = 5;
            const spins = Math.random() * (maxSpins - minSpins) + minSpins;
            const finalAngle = Math.random() * 360;
            const totalRotation = (spins * 360) + finalAngle;
            
            currentRotation += totalRotation;
            
            // Apply the rotation
            wheel.style.transform = `rotate(${currentRotation}deg)`;
            
            // Calculate result after spin completes
            setTimeout(() => {
                const normalizedAngle = (360 - (currentRotation % 360)) % 360;
                const segmentAngle = 360 / segments.length;
                const segmentIndex = Math.floor(normalizedAngle / segmentAngle);
                const selectedQuest = segments[segmentIndex];
                
                // Show result in modal
                showResultModal(selectedQuest);
                
                // Reset button state
                spinButton.disabled = false;
                spinButton.textContent = 'Spin the Wheel!';
                isSpinning = false;
                
                // Add a little celebration effect
                confetti();
            }, 4000);
        }

        function confetti() {
            // Simple confetti effect using emojis
            const emojis = ['üéâ', 'üéä', '‚ú®', 'üåü', 'üí´'];
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    createConfettiPiece(emojis[Math.floor(Math.random() * emojis.length)]);
                }, i * 100);
            }
        }

        function createConfettiPiece(emoji) {
            const confettiPiece = document.createElement('div');
            confettiPiece.textContent = emoji;
            confettiPiece.style.position = 'fixed';
            confettiPiece.style.left = Math.random() * window.innerWidth + 'px';
            confettiPiece.style.top = '-50px';
            confettiPiece.style.fontSize = '24px';
            confettiPiece.style.pointerEvents = 'none';
            confettiPiece.style.zIndex = '1000';
            confettiPiece.style.transition = 'all 3s ease-out';
            
            document.body.appendChild(confettiPiece);
            
            // Animate the confetti falling
            setTimeout(() => {
                confettiPiece.style.top = window.innerHeight + 'px';
                confettiPiece.style.transform = 'rotate(720deg)';
                confettiPiece.style.opacity = '0';
            }, 100);
            
            // Remove the element after animation
            setTimeout(() => {
                document.body.removeChild(confettiPiece);
            }, 3000);
        }

        // Modal functions
        function showResultModal(quest) {
            let modalHTML = `<div class="modal-content">${quest.emoji} ${quest.description}</div>`;
            
            if (quest.extraInfo) {
                modalHTML += `<div class="modal-extra-info">‚ÑπÔ∏è ${quest.extraInfo}</div>`;
            }
            
            if (quest.bonus) {
                modalHTML += `<div class="modal-bonus">BONUS: ${quest.bonus}</div>`;
            }
            
            modalHTML += `<button class="copy-button" onclick="copyQuestText('${quest.emoji}', \`${quest.description.replace(/`/g, '\\`').replace(/'/g, "\\'")}\`, ${quest.extraInfo ? `\`${quest.extraInfo.replace(/`/g, '\\`').replace(/'/g, "\\'")}\`` : 'null'}, ${quest.bonus ? `\`${quest.bonus.replace(/`/g, '\\`').replace(/'/g, "\\'")}\`` : 'null'})">Copy Prompt</button>`;
            
            modalContent.innerHTML = modalHTML;
            modalOverlay.classList.add('show');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function hideResultModal() {
            modalOverlay.classList.remove('show');
            document.body.style.overflow = ''; // Restore scrolling
        }

        function copyQuestText(emoji, description, extraInfo, bonus) {
            let formattedText = `My prompt was:\n\n${emoji} ${description}`;
            
            if (extraInfo) {
                formattedText += `\n\n‚ÑπÔ∏è ${extraInfo}`;
            }
            
            if (bonus) {
                formattedText += `\n\n${bonus}`;
            }
            
            // Use the modern clipboard API if available
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(formattedText).then(() => {
                    showCopyFeedback();
                }).catch((err) => {
                    console.error('Failed to copy text: ', err);
                    fallbackCopyText(formattedText);
                });
            } else {
                // Fallback for older browsers or non-secure contexts
                fallbackCopyText(formattedText);
            }
        }

        function fallbackCopyText(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showCopyFeedback();
            } catch (err) {
                console.error('Fallback copy failed: ', err);
                alert('Copy failed. Please manually select and copy the text.');
            }
            
            document.body.removeChild(textArea);
        }

        function showCopyFeedback() {
            const copyButton = document.querySelector('.copy-button');
            if (copyButton) {
                const originalText = copyButton.textContent;
                copyButton.textContent = 'Copied!';
                copyButton.classList.add('copied');
                
                setTimeout(() => {
                    copyButton.textContent = originalText;
                    copyButton.classList.remove('copied');
                }, 2000);
            }
        }

        // Modal event listeners
        modalClose.addEventListener('click', hideResultModal);
        modalOverlay.addEventListener('click', function(e) {
            if (e.target === modalOverlay) {
                hideResultModal();
            }
        });

        // Escape key to close modal
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && modalOverlay.classList.contains('show')) {
                hideResultModal();
            }
        });

        // Touch feedback for mobile
        spinButton.addEventListener('touchstart', function() {
            this.style.transform = 'scale(0.95)';
        });

        spinButton.addEventListener('touchend', function() {
            if (!this.disabled) {
                this.style.transform = 'scale(1)';
            }
        });
    </script>
</body>
</html>
